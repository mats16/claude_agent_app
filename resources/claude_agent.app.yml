resources:
  apps:
    claude_agent:
      name: claude-agent
      description: Claude Code on Databricks
      source_code_path: ../app
      resources:
        - name: secret
          secret:
            scope: claude_agent
            key: db_url
            permission: READ
      user_api_scopes:
        - sql
        - dashboards.genie
        - files.files
        - serving.serving-endpoints
        - catalog.catalogs:read
        - catalog.schemas:read
        - catalog.tables:read
      permissions:
        - level: CAN_USE
          group_name: users

  sql_warehouses:
    claude_agent_sql:
      name: claude-agent-sql
      cluster_size: 2X-Small
      min_num_clusters: 0
      max_num_clusters: 4
      auto_stop_mins: 10
      enable_serverless_compute: true
